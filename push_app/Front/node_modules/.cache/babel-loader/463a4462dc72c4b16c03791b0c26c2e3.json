{"ast":null,"code":"import * as firebase from 'firebase/app';\nimport { getMessaging, onMessage } from \"firebase/messaging\";\nimport admin from 'firebase-admin'; // For Firebase JS SDK v7.20.0 and later, measurementId is optional\n\nconst firebaseConfig = {\n  apiKey: \"AIzaSyBDhAyJlTYTdgz0v5ZhAHQ7onRnOErvSa8\",\n  authDomain: \"push-app-13b48.firebaseapp.com\",\n  //databaseURL: \"FROM FIREBASE CONSOLE\",\n  projectId: \"push-app-13b48\",\n  storageBucket: \"push-app-13b48.appspot.com\",\n  messagingSenderId: \"941794665646\",\n  appId: \"1:941794665646:web:a8c7bfcf17cfe8412eb93f\" // measurementId: \"FROM FIREBASE CONSOLE\",\n\n};\nconst serviceAccount = {\n  type: \"service_account\",\n  project_id: \"push-app-13b48\",\n  private_key_id: \"5bde8cbd79bf987244bee33348a86ec2239c112a\",\n  private_key: \"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC55oFu/J+/M+75\\nMczHydurXydYsTP9nnd0Jq3O4Wf/iLnfywrh5RrJxcIk+7K0YrDVZHqzlfIIn2It\\n196pODLsCKcoffemSw5BhmP+XJa/RV6FEt517hQ882vzFoxdREREexLJXsjPcLrp\\n9s5MsG28les1omWB1J1M+HRWxeY8DUYY5X6CP0Rx+/J2v8bhww2NTG/bQAIxSbSM\\nhal3ibHbGO7etspQSksbQzEBcnaJW3mzOSJI/o1lLLc3hYBXprLO3mnSjZiJ55Vb\\n84Vn5Vi1/gtJUmEXmoKMVO3lXQ4s22ogZT9GOM+gu1xETG5F66LJA9WQrLEWB05I\\ndgX+WYzDAgMBAAECggEADrCTxsW1bw73ODLPhNp2SzIimLdIxyaoBGiJo621IZo+\\nXqkbpYkMlyggDmF85OGT9qQESPLO16nJWmg5L8CbAxxiu4GxhmIrVx5iNWqmMNwW\\nIXuoH5Dq5+J8w8Gi4Tw9QF1EH6x0csvsjgNfy7iSgbkl1BNBysLjYTGUdxNK47DI\\nUNS3XJkdkkHBEKxZ1kcurY322k1n855rL9rOg8PLTpC4BOZ9Dn9GlVELdeqb+Zkg\\n5tFcQ+v0AhiwY0GjlF3UWc0OlyHVSXk/7dApptc2EipHTiK7fXGtIh44bcm1s0P7\\nNxY707tHvpECRBcVtjSe9k2XBSHGzRFjdBLNbMJK3QKBgQDkbzd6JiWsMjLuhV7E\\noyuA9Md77KHYuNiFZcQyW+x3Pu0CaLeplj6+mEUAeh5wAEIzLjIn/WvRDyFQhCyj\\nddKgSZzlhYa/xbRndFjeSd4USRugeHPL34sejqdhNNVSPGyl95Mc6hg2rrRvV2Ht\\nOMGsxztuQ/rLIx0ta2KlM9LRXQKBgQDQVVSIh1wymdYmEz/zxiHPrgkaOEU9IPx8\\nn99ZY9c16ne3K8Hh1WFOgMRdGX0wY+t4esMIVIeSeoBvaJFv+bgT0vWtPfaY2pOY\\nA9iCp7i7atNYtTHi9DWuxho3ZF8V9BOqqdHHEXkN8529Y/awdp0CMi4rrVPEC5yn\\n0DSY6iNUnwKBgQDXmbyzthNybcKyawCh+RtTUDSDWzj6UqRRa1Z87VPGzIZn8qv+\\nDMdVnmPp6liV/zh8E8rVAZPkMjKQSt/Su567GB9UZe1jTNdTmXVTAEbxwHqpv2YT\\ncv5cLen+jh4UyuEE2CFqdeu6mLPGLqRHgH0TdMs77D9lwNOGDceCAuKkJQKBgGJH\\n7wIdgUQpyJnbuO7CiI7V1lt1Mky9M/+C2DXuYMeBngpebS+hny8OlhQpgyKB8MK8\\nfyd94RscCV0FYp8Fmm5XtiiNM7k2XCx5m/k/MGnR4nRVvnwHow+ZSyLYifbsVx7K\\n0DjuKEKJq999uhHTUwyHKbrXIM46gCO2mCmPQy2XAoGAQJhBmoFEe6K7+PFPg6CD\\nmR4VGjtBerknwLslbGF75CVnVG2yOFQXYEhGAik3QHLyzhMv7qcnWtoWEL0X6u17\\nKNbi2oPEaNNZxsu1/AG7teF49ETQxD7BIjk7MUK6vBqw4JIk6yHL3ljCvjlKO8EP\\naIY2+WL+jd1AUTfdroNEMXs=\\n-----END PRIVATE KEY-----\\n\",\n  client_email: \"firebase-adminsdk-d8j6w@push-app-13b48.iam.gserviceaccount.com\",\n  client_id: \"118346411097860369248\",\n  auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\n  token_uri: \"https://oauth2.googleapis.com/token\",\n  auth_provider_x509_cert_url: \"https://www.googleapis.com/oauth2/v1/certs\",\n  client_x509_cert_url: \"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-d8j6w%40push-app-13b48.iam.gserviceaccount.com\"\n};\nfirebase.initializeApp(firebaseConfig);\nadmin.initializeApp({\n  credential: admin.credential.cert(serviceAccount) //databaseURL: 'your-database-url-here'\n\n});\nexport const messaging = admin.messaging();\nconsole.log(messaging, \"el objeto messaging\"); // export const messaging = getMessaging();\n\nexport const publicKey = 'BMsvwwBB9mUKIFIW78yyuf2OpNhAkDevP44GePJSM2F2nur4Xre6JohlChvBxHyEB6NPly_hD6khRR5-aruxTog'; // The topic name can be optionally prefixed with \"/topics/\".\n\nconst topic = 'highScores'; // Send a message to devices subscribed to the provided topic.\n\nexport const sendMessage = item => {\n  console.log(item, \"OBJETO PARA ENVIAR NOTIFICACION\");\n  const topicName = 'industry-tech'; // const message = {\n  //     \"token\" : item.token,\n  //     \"notification\": {\n  //       \"title\": item.titulo,\n  //       \"body\": item.mensaje\n  //     },\n  //     \"webpush\": {\n  //       \"headers\": {\n  //         \"Urgency\": \"high\"\n  //       },\n  //       \"notification\": {\n  //         \"title\": item.titulo,\n  //         \"body\": item.mensaje,\n  //         \"badge\":\"\"\n  //       },\n  //     }\n  //   }\n\n  const registrationToken = item.token;\n  const message = {\n    data: {\n      score: '850',\n      time: '2:45'\n    },\n    token: registrationToken\n  };\n  getMessaging.send(message).then(response => {\n    // Response is a message ID string.\n    console.log('Successfully sent message:', response);\n  }).catch(error => {\n    console.log('Error sending message:', error);\n  });\n};\nonMessage(messaging, payload => {\n  console.log('Message received. ', payload); // ...\n});","map":{"version":3,"sources":["/Users/jaimeojeda/Documents/firebase/push_app/src/firebaseInit.js"],"names":["firebase","getMessaging","onMessage","admin","firebaseConfig","apiKey","authDomain","projectId","storageBucket","messagingSenderId","appId","serviceAccount","type","project_id","private_key_id","private_key","client_email","client_id","auth_uri","token_uri","auth_provider_x509_cert_url","client_x509_cert_url","initializeApp","credential","cert","messaging","console","log","publicKey","topic","sendMessage","item","topicName","registrationToken","token","message","data","score","time","send","then","response","catch","error","payload"],"mappings":"AAAA,OAAO,KAAKA,QAAZ,MAA0B,cAA1B;AACA,SAASC,YAAT,EAAuBC,SAAvB,QAAwC,oBAAxC;AACA,OAAOC,KAAP,MAAkB,gBAAlB,C,CAEA;;AACA,MAAMC,cAAc,GAAG;AACnBC,EAAAA,MAAM,EAAE,yCADW;AAEnBC,EAAAA,UAAU,EAAE,gCAFO;AAGnB;AACAC,EAAAA,SAAS,EAAE,gBAJQ;AAKnBC,EAAAA,aAAa,EAAE,4BALI;AAMnBC,EAAAA,iBAAiB,EAAE,cANA;AAOnBC,EAAAA,KAAK,EAAE,2CAPY,CAQnB;;AARmB,CAAvB;AAYA,MAAMC,cAAc,GAAG;AACnBC,EAAAA,IAAI,EAAE,iBADa;AAEnBC,EAAAA,UAAU,EAAE,gBAFO;AAGnBC,EAAAA,cAAc,EAAE,0CAHG;AAInBC,EAAAA,WAAW,EAAE,ssDAJM;AAKnBC,EAAAA,YAAY,EAAE,gEALK;AAMnBC,EAAAA,SAAS,EAAE,uBANQ;AAOnBC,EAAAA,QAAQ,EAAE,2CAPS;AAQnBC,EAAAA,SAAS,EAAE,qCARQ;AASnBC,EAAAA,2BAA2B,EAAE,4CATV;AAUnBC,EAAAA,oBAAoB,EAAE;AAVH,CAAvB;AAaArB,QAAQ,CAACsB,aAAT,CAAuBlB,cAAvB;AAEAD,KAAK,CAACmB,aAAN,CAAoB;AAChBC,EAAAA,UAAU,EAAEpB,KAAK,CAACoB,UAAN,CAAiBC,IAAjB,CAAsBb,cAAtB,CADI,CAEhB;;AAFgB,CAApB;AAKA,OAAO,MAAMc,SAAS,GAAGtB,KAAK,CAACsB,SAAN,EAAlB;AACPC,OAAO,CAACC,GAAR,CAAYF,SAAZ,EAAuB,qBAAvB,E,CACA;;AAEA,OAAO,MAAMG,SAAS,GAAG,yFAAlB,C,CAEP;;AACA,MAAMC,KAAK,GAAG,YAAd,C,CAGA;;AACA,OAAO,MAAMC,WAAW,GAAIC,IAAD,IAAU;AAEjCL,EAAAA,OAAO,CAACC,GAAR,CAAYI,IAAZ,EAAkB,iCAAlB;AACA,QAAMC,SAAS,GAAG,eAAlB,CAHiC,CAIjC;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,QAAMC,iBAAiB,GAAGF,IAAI,CAACG,KAA/B;AAEA,QAAMC,OAAO,GAAG;AACZC,IAAAA,IAAI,EAAE;AACFC,MAAAA,KAAK,EAAE,KADL;AAEFC,MAAAA,IAAI,EAAE;AAFJ,KADM;AAKZJ,IAAAA,KAAK,EAAED;AALK,GAAhB;AASAhC,EAAAA,YAAY,CAACsC,IAAb,CAAkBJ,OAAlB,EACKK,IADL,CACWC,QAAD,IAAc;AAChB;AACAf,IAAAA,OAAO,CAACC,GAAR,CAAY,4BAAZ,EAA0Cc,QAA1C;AACH,GAJL,EAKKC,KALL,CAKYC,KAAD,IAAW;AACdjB,IAAAA,OAAO,CAACC,GAAR,CAAY,wBAAZ,EAAsCgB,KAAtC;AACH,GAPL;AAQH,CAzCM;AA4CPzC,SAAS,CAACuB,SAAD,EAAamB,OAAD,IAAa;AAC9BlB,EAAAA,OAAO,CAACC,GAAR,CAAY,oBAAZ,EAAkCiB,OAAlC,EAD8B,CAE9B;AACH,CAHQ,CAAT","sourcesContent":["import * as firebase from 'firebase/app'\nimport { getMessaging, onMessage } from \"firebase/messaging\";\nimport admin from 'firebase-admin';\n\n// For Firebase JS SDK v7.20.0 and later, measurementId is optional\nconst firebaseConfig = {\n    apiKey: \"AIzaSyBDhAyJlTYTdgz0v5ZhAHQ7onRnOErvSa8\",\n    authDomain: \"push-app-13b48.firebaseapp.com\",\n    //databaseURL: \"FROM FIREBASE CONSOLE\",\n    projectId: \"push-app-13b48\",\n    storageBucket: \"push-app-13b48.appspot.com\",\n    messagingSenderId: \"941794665646\",\n    appId: \"1:941794665646:web:a8c7bfcf17cfe8412eb93f\",\n    // measurementId: \"FROM FIREBASE CONSOLE\",\n\n};\n\nconst serviceAccount = {\n    type: \"service_account\",\n    project_id: \"push-app-13b48\",\n    private_key_id: \"5bde8cbd79bf987244bee33348a86ec2239c112a\",\n    private_key: \"-----BEGIN PRIVATE KEY-----\\nMIIEvQIBADANBgkqhkiG9w0BAQEFAASCBKcwggSjAgEAAoIBAQC55oFu/J+/M+75\\nMczHydurXydYsTP9nnd0Jq3O4Wf/iLnfywrh5RrJxcIk+7K0YrDVZHqzlfIIn2It\\n196pODLsCKcoffemSw5BhmP+XJa/RV6FEt517hQ882vzFoxdREREexLJXsjPcLrp\\n9s5MsG28les1omWB1J1M+HRWxeY8DUYY5X6CP0Rx+/J2v8bhww2NTG/bQAIxSbSM\\nhal3ibHbGO7etspQSksbQzEBcnaJW3mzOSJI/o1lLLc3hYBXprLO3mnSjZiJ55Vb\\n84Vn5Vi1/gtJUmEXmoKMVO3lXQ4s22ogZT9GOM+gu1xETG5F66LJA9WQrLEWB05I\\ndgX+WYzDAgMBAAECggEADrCTxsW1bw73ODLPhNp2SzIimLdIxyaoBGiJo621IZo+\\nXqkbpYkMlyggDmF85OGT9qQESPLO16nJWmg5L8CbAxxiu4GxhmIrVx5iNWqmMNwW\\nIXuoH5Dq5+J8w8Gi4Tw9QF1EH6x0csvsjgNfy7iSgbkl1BNBysLjYTGUdxNK47DI\\nUNS3XJkdkkHBEKxZ1kcurY322k1n855rL9rOg8PLTpC4BOZ9Dn9GlVELdeqb+Zkg\\n5tFcQ+v0AhiwY0GjlF3UWc0OlyHVSXk/7dApptc2EipHTiK7fXGtIh44bcm1s0P7\\nNxY707tHvpECRBcVtjSe9k2XBSHGzRFjdBLNbMJK3QKBgQDkbzd6JiWsMjLuhV7E\\noyuA9Md77KHYuNiFZcQyW+x3Pu0CaLeplj6+mEUAeh5wAEIzLjIn/WvRDyFQhCyj\\nddKgSZzlhYa/xbRndFjeSd4USRugeHPL34sejqdhNNVSPGyl95Mc6hg2rrRvV2Ht\\nOMGsxztuQ/rLIx0ta2KlM9LRXQKBgQDQVVSIh1wymdYmEz/zxiHPrgkaOEU9IPx8\\nn99ZY9c16ne3K8Hh1WFOgMRdGX0wY+t4esMIVIeSeoBvaJFv+bgT0vWtPfaY2pOY\\nA9iCp7i7atNYtTHi9DWuxho3ZF8V9BOqqdHHEXkN8529Y/awdp0CMi4rrVPEC5yn\\n0DSY6iNUnwKBgQDXmbyzthNybcKyawCh+RtTUDSDWzj6UqRRa1Z87VPGzIZn8qv+\\nDMdVnmPp6liV/zh8E8rVAZPkMjKQSt/Su567GB9UZe1jTNdTmXVTAEbxwHqpv2YT\\ncv5cLen+jh4UyuEE2CFqdeu6mLPGLqRHgH0TdMs77D9lwNOGDceCAuKkJQKBgGJH\\n7wIdgUQpyJnbuO7CiI7V1lt1Mky9M/+C2DXuYMeBngpebS+hny8OlhQpgyKB8MK8\\nfyd94RscCV0FYp8Fmm5XtiiNM7k2XCx5m/k/MGnR4nRVvnwHow+ZSyLYifbsVx7K\\n0DjuKEKJq999uhHTUwyHKbrXIM46gCO2mCmPQy2XAoGAQJhBmoFEe6K7+PFPg6CD\\nmR4VGjtBerknwLslbGF75CVnVG2yOFQXYEhGAik3QHLyzhMv7qcnWtoWEL0X6u17\\nKNbi2oPEaNNZxsu1/AG7teF49ETQxD7BIjk7MUK6vBqw4JIk6yHL3ljCvjlKO8EP\\naIY2+WL+jd1AUTfdroNEMXs=\\n-----END PRIVATE KEY-----\\n\",\n    client_email: \"firebase-adminsdk-d8j6w@push-app-13b48.iam.gserviceaccount.com\",\n    client_id: \"118346411097860369248\",\n    auth_uri: \"https://accounts.google.com/o/oauth2/auth\",\n    token_uri: \"https://oauth2.googleapis.com/token\",\n    auth_provider_x509_cert_url: \"https://www.googleapis.com/oauth2/v1/certs\",\n    client_x509_cert_url: \"https://www.googleapis.com/robot/v1/metadata/x509/firebase-adminsdk-d8j6w%40push-app-13b48.iam.gserviceaccount.com\"\n  }\n\nfirebase.initializeApp(firebaseConfig);\n \nadmin.initializeApp({\n    credential: admin.credential.cert(serviceAccount),\n    //databaseURL: 'your-database-url-here'\n  });\n\nexport const messaging = admin.messaging();\nconsole.log(messaging, \"el objeto messaging\");\n// export const messaging = getMessaging();\n\nexport const publicKey = 'BMsvwwBB9mUKIFIW78yyuf2OpNhAkDevP44GePJSM2F2nur4Xre6JohlChvBxHyEB6NPly_hD6khRR5-aruxTog';\n\n// The topic name can be optionally prefixed with \"/topics/\".\nconst topic = 'highScores';\n\n\n// Send a message to devices subscribed to the provided topic.\nexport const sendMessage = (item) => {\n\n    console.log(item, \"OBJETO PARA ENVIAR NOTIFICACION\");\n    const topicName = 'industry-tech';\n    // const message = {\n    //     \"token\" : item.token,\n    //     \"notification\": {\n    //       \"title\": item.titulo,\n    //       \"body\": item.mensaje\n    //     },\n    //     \"webpush\": {\n    //       \"headers\": {\n    //         \"Urgency\": \"high\"\n    //       },\n    //       \"notification\": {\n    //         \"title\": item.titulo,\n    //         \"body\": item.mensaje,\n    //         \"badge\":\"\"\n    //       },\n    //     }\n    //   }\n\n    const registrationToken = item.token;\n\n    const message = {\n        data: {\n            score: '850',\n            time: '2:45'\n        },\n        token: registrationToken\n    };\n\n\n    getMessaging.send(message)\n        .then((response) => {\n            // Response is a message ID string.\n            console.log('Successfully sent message:', response);\n        })\n        .catch((error) => {\n            console.log('Error sending message:', error);\n        });\n}\n\n\nonMessage(messaging, (payload) => {\n    console.log('Message received. ', payload);\n    // ...\n});\n\n"]},"metadata":{},"sourceType":"module"}